"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[424],{8480:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>d});var n=i(4848),s=i(8453);const o={slug:"trek-gis-study",title:"Choosing the Best Geographic Information System (GIS) for Trek",authors:["matthew"],tags:["project","maps","POI","GIS","geocoding","routing"]},r=void 0,a={permalink:"/trekkers-docs-public/blog/trek-gis-study",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2024-07-10-gis-study.md",source:"@site/blog/2024-07-10-gis-study.md",title:"Choosing the Best Geographic Information System (GIS) for Trek",description:"This blogpost is a modified version of an internal Trek document. You can view the internal document",date:"2024-07-10T00:00:00.000Z",tags:[{label:"project",permalink:"/trekkers-docs-public/blog/tags/project"},{label:"maps",permalink:"/trekkers-docs-public/blog/tags/maps"},{label:"POI",permalink:"/trekkers-docs-public/blog/tags/poi"},{label:"GIS",permalink:"/trekkers-docs-public/blog/tags/gis"},{label:"geocoding",permalink:"/trekkers-docs-public/blog/tags/geocoding"},{label:"routing",permalink:"/trekkers-docs-public/blog/tags/routing"}],readingTime:8.06,hasTruncateMarker:!1,authors:[{name:"Matthew Kang",title:"Developer",url:"https://www.linkedin.com/in/kang-matt/",imageURL:"/trekkers-docs-public/img/matthewkang.jpeg",key:"matthew"}],frontMatter:{slug:"trek-gis-study",title:"Choosing the Best Geographic Information System (GIS) for Trek",authors:["matthew"],tags:["project","maps","POI","GIS","geocoding","routing"]},unlisted:!1,nextItem:{title:"Local Deployment and a Glimpse Into Trek's CI/CD System",permalink:"/trekkers-docs-public/blog/local-deployment-experiment"}},l={authorsImageUrls:[void 0]},d=[{value:"What is a GIS?",id:"what-is-a-gis",level:2},{value:"What makes a GIS Good (for Trek)?",id:"what-makes-a-gis-good-for-trek",level:2},{value:"Comparison of GIS API Integrations",id:"comparison-of-gis-api-integrations",level:2},{value:"Summary",id:"summary",level:3},{value:"POI Data: Image, Description, and Reviews Data",id:"poi-data-image-description-and-reviews-data",level:3},{value:"Proposed Solution",id:"proposed-solution",level:2},{value:"Benefits",id:"benefits",level:3},{value:"Drawbacks",id:"drawbacks",level:3},{value:"Internal POI Object with Mapbox and OSM",id:"internal-poi-object-with-mapbox-and-osm",level:2},{value:"POI Object",id:"poi-object",level:3},{value:"Flow of Data",id:"flow-of-data",level:3},{value:"Compliance with Mapbox Terms of Service",id:"compliance-with-mapbox-terms-of-service",level:3},{value:"Conclusion",id:"conclusion",level:2}];function c(e){const t={a:"a",admonition:"admonition",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsxs)(t.p,{children:["This blogpost is a modified version of an internal Trek document. You can view the internal document\n",(0,n.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:i(13).A+"",children:"here"}),"."]})}),"\n",(0,n.jsxs)(t.p,{children:["Integrating ",(0,n.jsx)(t.strong,{children:"Google Maps"})," was our original plan at Trek until we realized that the cost of integrating Google Maps would be outside our budget, as well as the budget of anyone deploying Trek."]}),"\n",(0,n.jsx)(t.p,{children:"Although Google provides its customers with a $200 credit for the use of their APIs, including the Google Maps Platform APIs, once customers exceed the $200 limit, they are faced with potentially thousands of dollars in billing statements."}),"\n",(0,n.jsx)(t.p,{children:"The truth is, Google holds a monopoly over high-quality geographical information, especially their Places API, which provides the best up-to-date Points of Interest (POI) data. Using Google would be the best move if we could afford to lose the money. Unfortunately, we are not one of those companies that can lose money for a decade before making a profit."}),"\n",(0,n.jsx)(t.p,{children:"Furthermore, Google does not allow its customers to cache or store any of its data (with the exception of place IDs), which means that every time we want to display a place name for the user, we have to call Google's API\u2014something we cannot afford."}),"\n",(0,n.jsx)(t.p,{children:"This blog post goes through the GIS alternatives to Google Maps that we have explored in the process of designing and building Trek."}),"\n",(0,n.jsx)(t.h2,{id:"what-is-a-gis",children:"What is a GIS?"}),"\n",(0,n.jsx)(t.p,{children:"A Geographic Information System (GIS) is a powerful tool that allows users to visualize, analyze, and interpret spatial and geographic data. In the context of Trek, a GIS is essential for enhancing the user experience by providing detailed and interactive maps, route planning, and information on places of interest. It integrates various data sources to create a comprehensive view of the trip and the world."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"A Geographic Information System (GIS) for Trek should offer the following features or services:"})}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Maps -"})," Various visual dynamic maps imagery. Displays maps for \u2018Map View\u2019 and location markers, \u2018Pins\u2019 within the map, and geographic information (longitude and latitude) to provide context when searching for places."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Routes -"})," Provides routing information in \u2018driving\u2019, \u2018transiting\u2019, \u2018cycling\u2019, or \u2018walking\u2019. Find best routes from place to place in different transportation methods."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Places of Interest (POI) -"})," Provides information on places and ability to search for places. Gathers and provides place information including place ID (identifiers), name, location, description, address, photo, and reviews."]}),"\n",(0,n.jsx)(t.h2,{id:"what-makes-a-gis-good-for-trek",children:"What makes a GIS Good (for Trek)?"}),"\n",(0,n.jsx)(t.p,{children:"GIS can be used in many different applications and use cases. The goal of GIS in Trek is to help meet its functional and non-functional requirements,\nincluding scalability and future-oriented design. The goal is to explore different GIS options Trek can integrate, while considering the following:"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Compliance \u2014"})," ",(0,n.jsx)(t.em,{children:"\u201cAre we complying with GIS\u2019 Terms of Service? Are we stealing data and potentially committing academic misconduct?\u201d"})]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"UI/UX \u2014"})," ",(0,n.jsx)(t.em,{children:"\u201cDoes the UI Look Good?\u201d"})]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Usability \u2014"})," ",(0,n.jsx)(t.em,{children:"\u201cDoes it provide good usability with sufficient information of places and provide quality search and personalization?\u201d"})]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Sustainability \u2014"})," ",(0,n.jsx)(t.em,{children:"\u201cWill the system be financially sustainable with the integration costs? Can costs be lowered by caching or storing data?\u201d"})]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Maintainability \u2014"})," ",(0,n.jsx)(t.em,{children:"\u201cIs the information easily manageable and does not require frequent extensive maintenance on Trek\u2019s end?\u201d"})]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Dependency \u2014"})," ",(0,n.jsx)(t.em,{children:"\u201cCan we manage our own information without relying on the GIS?  Are we able to migrate from this GIS to another system easily\u201d"})]}),"\n",(0,n.jsx)(t.h2,{id:"comparison-of-gis-api-integrations",children:"Comparison of GIS API Integrations"}),"\n",(0,n.jsx)(t.p,{children:"Some GIS services do not provide all three packages (Maps, Routing, POI). Some GIS services do not allow caching or storage of data. Some GIS services are outside our budget."}),"\n",(0,n.jsx)(t.h3,{id:"summary",children:"Summary"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"API"}),(0,n.jsx)(t.th,{children:"Maps & Routing"}),(0,n.jsx)(t.th,{children:"Places of Interests"}),(0,n.jsx)(t.th,{children:"Caching & Storing"}),(0,n.jsx)(t.th,{children:"Pricing"}),(0,n.jsx)(t.th,{children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Google Maps Platform"}),(0,n.jsx)(t.td,{children:"Best"}),(0,n.jsx)(t.td,{children:"Photos, Reviews"}),(0,n.jsx)(t.td,{children:"Restrictive"}),(0,n.jsx)(t.td,{children:"High"}),(0,n.jsx)(t.td,{children:"Best up-to-date POI information"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"FourSquare"}),(0,n.jsx)(t.td,{children:"N/A (POI only)"}),(0,n.jsx)(t.td,{children:"Photos, Reviews"}),(0,n.jsx)(t.td,{children:"Restrictive"}),(0,n.jsx)(t.td,{children:"Medium"}),(0,n.jsx)(t.td,{children:"Provides decent POI and places \u2018personalization\u2019; best for tourist POI"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Mapbox"}),(0,n.jsx)(t.td,{children:"Good"}),(0,n.jsx)(t.td,{children:"Integrates FourSquare"}),(0,n.jsx)(t.td,{children:"Restrictive (non-enterprise)"}),(0,n.jsx)(t.td,{children:"Medium/Low"}),(0,n.jsx)(t.td,{children:"Alternative to Google Maps. Good UI. OSM-based. Second most popular"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"LocationIQ"}),(0,n.jsx)(t.td,{children:"No transit routing"}),(0,n.jsx)(t.td,{children:"Only GeoCoding"}),(0,n.jsx)(t.td,{children:"Allowed"}),(0,n.jsx)(t.td,{children:"Low"}),(0,n.jsx)(t.td,{children:"Fully OSM Data packaged as API. Comes with only Geocoding data (no POI)"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"MapTiler"}),(0,n.jsx)(t.td,{children:"Good"}),(0,n.jsx)(t.td,{children:"Basic"}),(0,n.jsx)(t.td,{children:"Client-side"}),(0,n.jsx)(t.td,{children:"Low"}),(0,n.jsx)(t.td,{})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"HERE"}),(0,n.jsx)(t.td,{children:"Good"}),(0,n.jsx)(t.td,{children:"Basic"}),(0,n.jsx)(t.td,{children:"30 days or Response Header"}),(0,n.jsx)(t.td,{children:"Low"}),(0,n.jsx)(t.td,{children:"No permanent storage of location IDs"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"MapQuest"}),(0,n.jsx)(t.td,{children:"No transit routing"}),(0,n.jsx)(t.td,{children:"Basic"}),(0,n.jsx)(t.td,{children:"Restrictive (non-paid)"}),(0,n.jsx)(t.td,{children:"Low"}),(0,n.jsx)(t.td,{})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"poi-data-image-description-and-reviews-data",children:"POI Data: Image, Description, and Reviews Data"}),"\n",(0,n.jsx)(t.p,{children:"Apart from Google Maps Platform and ForeSquare, OSM-based GIS APIs only provide basic POI data. Some GIS APIs do not provide contact information or opening hours. We can integrate the following technologies to provide end-users with these data:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Image"})," \u2013 For landmarks, well-known businesses (e.g. McDonalds), and attractions, use Wikipedia API to fetch images that are shareable for commercial purposes."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Description"})," \u2013 For landmarks, well-known businesses (e.g. McDonalds), and attractions, use AI generated descriptions."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Contact, Hours, and Reviews"})," \u2013 Use TripAdvisor or Yelp API to link review data, open hours, and contact information. Only load review data if the user clicks on it to limit unnecessary API calls. Yelp allows caching up to 24 hours but has no free tier."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"In-House User-Contributed POI Data System"})," \u2013 Support an in-house user-contributed POI Data system, where users can upload images, description, and reviews to a place."]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"proposed-solution",children:"Proposed Solution"}),"\n",(0,n.jsx)(t.p,{children:"Create an OSM-based In-House User-Contributed POI Data System with integration with Mapbox for additional non-cached POI attributes such as contact information and hours of operation. The goal is to integrate the best of both worlds: MapBox and OSM."}),"\n",(0,n.jsx)(t.h3,{id:"benefits",children:"Benefits"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Integrates MapBox\u2019s context-based searching capabilities, better than OSM queries."}),"\n",(0,n.jsx)(t.li,{children:"Extensive POI database, better than OSM database."}),"\n",(0,n.jsx)(t.li,{children:"Storage of Data with OSM-provided attributes, more control over data."}),"\n",(0,n.jsx)(t.li,{children:"Less dependency on Mapbox."}),"\n",(0,n.jsx)(t.li,{children:"In case Mapbox changes their Mapbox ID or expires, users will still get the correct basic geographical data."}),"\n",(0,n.jsx)(t.li,{children:"In case we migrate from Mapbox to another GIS provider, process will be smoother."}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"drawbacks",children:"Drawbacks"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Complexity of data with using two sources alongside user-generated content."}),"\n",(0,n.jsx)(t.li,{children:"Keeping three different IDs and maintaining synchronization."}),"\n",(0,n.jsx)(t.li,{children:"Requires handling of cases where Mapbox POI information cannot be matched with OSM POIs."}),"\n",(0,n.jsx)(t.li,{children:"Since no attributes except Mapbox ID are stored, it requires API calls for every look-up. Possible mitigation: for popular POIs, add POI to OSM ourselves and help contribute to OSM."}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"internal-poi-object-with-mapbox-and-osm",children:"Internal POI Object with Mapbox and OSM"}),"\n",(0,n.jsx)(t.p,{children:"Our internal POI system will store POI objects in the following list of attributes (non-exhaustive):"}),"\n",(0,n.jsx)(t.h3,{id:"poi-object",children:"POI Object"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Attribute"}),(0,n.jsx)(t.th,{children:"Source"}),(0,n.jsx)(t.th,{children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"POI ID"}),(0,n.jsx)(t.td,{children:"internal"}),(0,n.jsx)(t.td,{children:"identifier for POI"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Mapbox ID"}),(0,n.jsx)(t.td,{children:"Mapbox"}),(0,n.jsx)(t.td,{children:"Mapbox place identifier (limited use but storable)"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"OSM ID"}),(0,n.jsx)(t.td,{children:"OSM"}),(0,n.jsx)(t.td,{children:"OSM place identifier"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Place Name"}),(0,n.jsx)(t.td,{children:"OSM"}),(0,n.jsx)(t.td,{children:"Display name in OSM"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Latitude"}),(0,n.jsx)(t.td,{children:"OSM"}),(0,n.jsx)(t.td,{children:"Latitude in OSM"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Longitude"}),(0,n.jsx)(t.td,{children:"OSM"}),(0,n.jsx)(t.td,{children:"Longitude in OSM"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Description"}),(0,n.jsx)(t.td,{children:"AI generated"}),(0,n.jsx)(t.td,{children:"AI generated description of place"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Photos"}),(0,n.jsx)(t.td,{children:"Wikipedia"}),(0,n.jsx)(t.td,{children:"Fetch from Wikipedia API"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Other Attributes"}),(0,n.jsx)(t.td,{children:"User-Generated"}),(0,n.jsx)(t.td,{children:"Examples include: Reviews"})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"flow-of-data",children:"Flow of Data"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"User Looks-Up Place on a Map or Search Box"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Uses SearchBox API on Mapbox to return Mapbox ID and other POI information such as place name, image, etc."}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"User Adds the Place to their Trip (Mapbox ID is not in our database)"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Mapbox ID is stored into a POI Object in our database."}),"\n",(0,n.jsxs)(t.li,{children:["If and only if the OSM-equivalent of the Place exists, Match POI information from Mapbox API results to OSM and fill in:","\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"OSM ID from OSM"}),"\n",(0,n.jsx)(t.li,{children:"Place Name from OSM"}),"\n",(0,n.jsx)(t.li,{children:"Latitude and Longitude from OSM"}),"\n",(0,n.jsx)(t.li,{children:"Other useful information"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"User Views a Trip with the Place they Added (e.g. Itinerary/Timeline or Map)"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Identify Places (POIs or POI Objects) by our POI ID, not Mapbox ID."}),"\n",(0,n.jsx)(t.li,{children:"Display data in our POI Object for basic information (Place Name, Latitude, Longitude) of the place."}),"\n",(0,n.jsx)(t.li,{children:"If our POI object does not store OSM data (it couldn\u2019t find an equivalent OSM POI data), then fetch from Mapbox using Mapbox ID."}),"\n",(0,n.jsx)(t.li,{children:"When and only when the user wants the details of the place, using Mapbox ID, fetch Mapbox data (Phone #, Website, Operating Hours)."}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"compliance-with-mapbox-terms-of-service",children:"Compliance with Mapbox Terms of Service"}),"\n",(0,n.jsx)(t.p,{children:"Mapbox does not allow storage of API results except for Mapbox ID. The proposed solution only stores Mapbox ID from the API results."}),"\n",(0,n.jsx)(t.p,{children:"Mapbox does not prohibit using its services with other third-party data sources. I couldn\u2019t find anything that says I can\u2019t use it with other services, unlike Google Maps or HERE."}),"\n",(0,n.jsx)(t.p,{children:"Both Mapbox and OSM require attributions for its data. It must be clear where a specific piece of data comes from."}),"\n",(0,n.jsx)(t.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,n.jsx)(t.p,{children:"Integrating a GIS into Trek is essential for providing a rich user experience with detailed maps, routing information, and places of interest. While Google Maps offers comprehensive data, its high cost and restrictive data usage policies make it impractical for Trek. Instead, using a combination of Mapbox and OSM provides a cost-effective and flexible solution. By following the proposed plan and ensuring compliance with terms of service, Trek can offer users an interactive and informative travel planning tool without breaking the bank (for end-users as well!)."}),"\n",(0,n.jsx)(t.p,{children:"For further details on the integration process or to provide feedback, feel free to contact us."})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},13:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/files/Trek-Geographic-Information-System-f322afbecf2fe7577b463c2abb7b07d3.pdf"},8453:(e,t,i)=>{i.d(t,{R:()=>r,x:()=>a});var n=i(6540);const s={},o=n.createContext(s);function r(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);