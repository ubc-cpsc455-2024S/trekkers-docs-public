<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">Trek&#x27;s File Storage System with Amazon S3 | Trekkers</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ubc-cpsc455-2024S.github.io/trekkers-docs-public/img/trek-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ubc-cpsc455-2024S.github.io/trekkers-docs-public/img/trek-social-card.jpg"><meta data-rh="true" property="og:url" content="https://ubc-cpsc455-2024S.github.io/trekkers-docs-public/blog/s3-integration"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Trek&#x27;s File Storage System with Amazon S3 | Trekkers"><meta data-rh="true" name="description" content="This blogpost is a modified version of an internal Trek document. You can view the internal document"><meta data-rh="true" property="og:description" content="This blogpost is a modified version of an internal Trek document. You can view the internal document"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-07-20T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://www.linkedin.com/in/jacob-zhu-a70512212,https://www.linkedin.com/in/kang-matt/"><meta data-rh="true" property="article:tag" content="project,maps,POI,GIS,geocoding,routing"><link data-rh="true" rel="icon" href="/trekkers-docs-public/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ubc-cpsc455-2024S.github.io/trekkers-docs-public/blog/s3-integration"><link data-rh="true" rel="alternate" href="https://ubc-cpsc455-2024S.github.io/trekkers-docs-public/blog/s3-integration" hreflang="en"><link data-rh="true" rel="alternate" href="https://ubc-cpsc455-2024S.github.io/trekkers-docs-public/blog/s3-integration" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://ubc-cpsc455-2024S.github.io/trekkers-docs-public/blog/s3-integration","mainEntityOfPage":"https://ubc-cpsc455-2024S.github.io/trekkers-docs-public/blog/s3-integration","url":"https://ubc-cpsc455-2024S.github.io/trekkers-docs-public/blog/s3-integration","headline":"Trek's File Storage System with Amazon S3","name":"Trek's File Storage System with Amazon S3","description":"This blogpost is a modified version of an internal Trek document. You can view the internal document","datePublished":"2024-07-20T00:00:00.000Z","author":[{"@type":"Person","name":"Jacob Zhu","description":"Developer","url":"https://www.linkedin.com/in/jacob-zhu-a70512212","image":"/trekkers-docs-public/img/jacob.jpg"},{"@type":"Person","name":"Matthew Kang","description":"Developer","url":"https://www.linkedin.com/in/kang-matt/","image":"/trekkers-docs-public/img/matthewkang.jpeg"}],"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://ubc-cpsc455-2024S.github.io/trekkers-docs-public/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/trekkers-docs-public/blog/rss.xml" title="Trekkers RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/trekkers-docs-public/blog/atom.xml" title="Trekkers Atom Feed"><link rel="stylesheet" href="/trekkers-docs-public/assets/css/styles.08ff33e2.css">
<script src="/trekkers-docs-public/assets/js/runtime~main.7becf5f9.js" defer="defer"></script>
<script src="/trekkers-docs-public/assets/js/main.b7b9f4f2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><style data-mantine-styles="classes">@media (max-width: 35.99375em) {.mantine-visible-from-xs {display: none !important;}}@media (min-width: 36em) {.mantine-hidden-from-xs {display: none !important;}}@media (max-width: 47.99375em) {.mantine-visible-from-sm {display: none !important;}}@media (min-width: 48em) {.mantine-hidden-from-sm {display: none !important;}}@media (max-width: 61.99375em) {.mantine-visible-from-md {display: none !important;}}@media (min-width: 62em) {.mantine-hidden-from-md {display: none !important;}}@media (max-width: 74.99375em) {.mantine-visible-from-lg {display: none !important;}}@media (min-width: 75em) {.mantine-hidden-from-lg {display: none !important;}}@media (max-width: 87.99375em) {.mantine-visible-from-xl {display: none !important;}}@media (min-width: 88em) {.mantine-hidden-from-xl {display: none !important;}}</style><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/trekkers-docs-public/"><div class="navbar__logo"><img src="/trekkers-docs-public/img/Trekkers_Dark_Logo.svg" alt="Trekkers Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" width="100px"><img src="/trekkers-docs-public/img/Trekkers_Light_Logo.svg" alt="Trekkers Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" width="100px"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/trekkers-docs-public/docs/terms-of-reference">Development</a><a class="navbar__item navbar__link" href="/trekkers-docs-public/team">Team</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/trekkers-docs-public/blog">Blog</a><a class="navbar__item navbar__link" href="/trekkers-docs-public/docs/category/project-progress">Project Progress</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ubc-cpsc455-2024S/project-04_trekkers" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/trekkers-docs-public/blog/s3-integration">Trek&#x27;s File Storage System with Amazon S3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/trekkers-docs-public/blog/trek-gis-study">Choosing the Best Geographic Information System (GIS) for Trek</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/trekkers-docs-public/blog/local-deployment-experiment">Local Deployment and a Glimpse Into Trek&#x27;s CI/CD System</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/trekkers-docs-public/blog/wip-3">Work In Progress 3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/trekkers-docs-public/blog/project-workflow">A Deep Dive into Trekkers Project Workflow</a></li></ul></nav></aside><main class="col col--7"><article><header><h1 class="title_f1Hy">Trek&#x27;s File Storage System with Amazon S3</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-07-20T00:00:00.000Z">July 20, 2024</time> · <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://www.linkedin.com/in/jacob-zhu-a70512212" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="/trekkers-docs-public/img/jacob.jpg" alt="Jacob Zhu"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://www.linkedin.com/in/jacob-zhu-a70512212" target="_blank" rel="noopener noreferrer"><span>Jacob Zhu</span></a></div><small class="avatar__subtitle">Developer</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://www.linkedin.com/in/kang-matt/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="/trekkers-docs-public/img/matthewkang.jpeg" alt="Matthew Kang"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://www.linkedin.com/in/kang-matt/" target="_blank" rel="noopener noreferrer"><span>Matthew Kang</span></a></div><small class="avatar__subtitle">Developer</small></div></div></div></div></header><div id="__blog-post-container" class="markdown"><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>This blogpost is a modified version of an internal Trek document. You can view the internal document
<a href="/trekkers-docs-public/assets/files/Trek-AWS-S3-Integration-f7a9135df2cc329b75883ab8cb6a6c7d.pdf" target="_blank">here</a>.</p></div></div>
<p>At Trek, our goal is to make trip planning as smooth and efficient as possible. To achieve this, we decided to integrate AWS S3 for storing images and files, allowing users to upload photos and other media easily. In this blog post, we’ll walk you through our integration process, the challenges we faced, and how we overcame them.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-aws-s3">Why AWS S3?<a href="#why-aws-s3" class="hash-link" aria-label="Direct link to Why AWS S3?" title="Direct link to Why AWS S3?">​</a></h2>
<p>AWS S3 (Simple Storage Service) provides scalable object storage, making it an ideal choice for our needs. It offers:</p>
<ul>
<li>Reliable and durable storage.</li>
<li>Scalability to handle large amounts of data.</li>
<li>Integration with other AWS services.</li>
<li>Secure access control and management.</li>
<li>Overview of the Integration</li>
</ul>
<p>The integration of AWS S3 in Trek is handled entirely by our backend Express server to ensure security and simplicity. Here’s a high-level overview of the data flow when a user uploads an image:</p>
<ul>
<li>User Uploads Image: The user uploads an image through the frontend.</li>
<li>Backend Processing: The image is sent to the backend server, which handles the upload to S3.</li>
<li>S3 Storage: The image is stored in an S3 bucket.</li>
<li>MongoDB Logging: Metadata about the uploaded image is logged in our MongoDB database.</li>
<li>S3 Pricing Considerations</li>
</ul>
<p>While AWS offers a Free Tier with the following limits:</p>
<ul>
<li>5GB of S3 storage.</li>
<li>20,000 GET requests.</li>
<li>2,000 PUT, COPY, POST, or LIST requests.</li>
<li>100GB of data transfer out per month.</li>
</ul>
<p>It’s essential to monitor usage to avoid unexpected costs. We learned the hard way when a private, empty S3 bucket unexpectedly incurred a $1300 charge. Always monitor your S3 usage and set budget alerts to avoid surprises.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-aws-access">Setting Up AWS Access<a href="#setting-up-aws-access" class="hash-link" aria-label="Direct link to Setting Up AWS Access" title="Direct link to Setting Up AWS Access">​</a></h2>
<p>To interact with AWS S3, we use an IAM user, trek-s3-user, which has the necessary permissions to upload files. The credentials are stored in environment variables for security:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ATLAS_URI=&quot;...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AWS_ACCESS_KEY_ID=your_access_key_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AWS_SECRET_ACCESS_KEY=your_secret_access_key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AWS_REGION=us-east-2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S3_BUCKET_NAME=cpsc-455-trek</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These keys are used by our backend server to authenticate requests to AWS S3.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mongodb-schema-for-s3-files">MongoDB Schema for S3 Files<a href="#mongodb-schema-for-s3-files" class="hash-link" aria-label="Direct link to MongoDB Schema for S3 Files" title="Direct link to MongoDB Schema for S3 Files">​</a></h2>
<p>We keep track of the files stored in S3 using a MongoDB collection called S3Files. Here’s the schema:</p>
<ul>
<li>_id: Auto-generated unique ID.</li>
<li>key: S3 object key.</li>
<li>bucket: S3 bucket name.</li>
<li>url: URL of the stored object.</li>
<li>upload_by: User ID of the uploader.</li>
<li>upload_time: Timestamp of the upload.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="backend-validation-before-upload">Backend Validation Before Upload<a href="#backend-validation-before-upload" class="hash-link" aria-label="Direct link to Backend Validation Before Upload" title="Direct link to Backend Validation Before Upload">​</a></h3>
<p>To ensure that only appropriate files are uploaded, we perform several validations on the backend:</p>
<ul>
<li>File Type: Verify the file type being uploaded.</li>
<li>File Size: Check if the file size is within acceptable limits.</li>
<li>Upload Frequency: Limit the number of files a user can upload within a specific period.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="middleware-for-s3--mongodb">Middleware for S3 &amp; MongoDB<a href="#middleware-for-s3--mongodb" class="hash-link" aria-label="Direct link to Middleware for S3 &amp; MongoDB" title="Direct link to Middleware for S3 &amp; MongoDB">​</a></h3>
<p>Our backend uses Express middlewares to handle the upload and logging process:</p>
<ul>
<li><strong>Auth0 Middleware</strong>: Verifies the JWT token and appends user information to the request.</li>
<li><strong>S3 Middleware</strong>: Uploads the image to S3 and appends the metadata to the request.</li>
</ul>
<p>Here’s an example of the S3 uploading middleware:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import { upload } from &#x27;./s3/upload&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app.post(&#x27;/test/upload&#x27;, upload.array(&#x27;photos&#x27;, 3), function (err, req, res) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (err) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // handle upload error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    res.send(&#x27;Successfully uploaded &#x27; + (req.files?.length ?? 0) + &#x27; files!&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If an error occurs during the upload, it’s passed to the callback function, allowing for proper error handling.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>Integrating AWS S3 into Trek has enhanced our ability to handle user-uploaded images efficiently and securely. By leveraging AWS S3’s scalable storage and integrating it with our backend, we’ve ensured that our users have a seamless experience when planning their trips. We hope our journey and insights help you in your own integration projects.</p>
<p>Stay tuned for more updates and technical deep dives from the Trekkers team!</p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/trekkers-docs-public/blog/tags/project">project</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/trekkers-docs-public/blog/tags/maps">maps</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/trekkers-docs-public/blog/tags/poi">POI</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/trekkers-docs-public/blog/tags/gis">GIS</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/trekkers-docs-public/blog/tags/geocoding">geocoding</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/trekkers-docs-public/blog/tags/routing">routing</a></li></ul></div></div><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2024-07-20.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/trekkers-docs-public/blog/trek-gis-study"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Choosing the Best Geographic Information System (GIS) for Trek</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-aws-s3" class="table-of-contents__link toc-highlight">Why AWS S3?</a></li><li><a href="#setting-up-aws-access" class="table-of-contents__link toc-highlight">Setting Up AWS Access</a></li><li><a href="#mongodb-schema-for-s3-files" class="table-of-contents__link toc-highlight">MongoDB Schema for S3 Files</a><ul><li><a href="#backend-validation-before-upload" class="table-of-contents__link toc-highlight">Backend Validation Before Upload</a></li><li><a href="#middleware-for-s3--mongodb" class="table-of-contents__link toc-highlight">Middleware for S3 &amp; MongoDB</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/trekkers-docs-public/docs/category/release-notes">Release Notes</a></li></ul></div><div class="col footer__col"><div class="footer__title">Team</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">About Us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.students.cs.ubc.ca/~cs-455/2024_S/" target="_blank" rel="noopener noreferrer" class="footer__link-item">CPSC 455 Course<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://cs.ubc.ca" target="_blank" rel="noopener noreferrer" class="footer__link-item">UBC CS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/trekkers-docs-public/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/ubc-cpsc455-2024S/project-04_trekkers" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Trekkers, All rights reserved.</div></div></div></footer></div>
</body>
</html>